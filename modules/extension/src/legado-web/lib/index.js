"use strict";var L=Object.create;var c=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var C=(e,o)=>{for(var s in o)c(e,s,{get:o[s],enumerable:!0})},k=(e,o,s,r)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of x(o))!w.call(e,n)&&n!==s&&c(e,n,{get:()=>o[n],enumerable:!(r=b(o,n))||r.enumerable});return e};var v=(e,o,s)=>(s=e!=null?L(h(e)):{},k(o||!e||!e.__esModule?c(s,"default",{value:e,enumerable:!0}):s,e)),U=e=>k(c({},"__esModule",{value:!0}),e);var K={};C(K,{apis:()=>y,axiosInstance:()=>t,baseURL_localStorage_key:()=>R});module.exports=U(K);var d={getItem(){}},i={},u={env:{}};var m=v(require("axios"),1),R="remoteUrl",A=1e3,I=m.default.create({baseURL:u.env.VITE_API||d.getItem(R)||i.origin,timeout:120*A}),t=I;var p="",l="",f=()=>{},B=()=>{};var O=async(e=p)=>{let{data:o}=await t.get("getReadConfig",{baseURL:e.toString(),timeout:3e3});if(o.isSuccess)try{return JSON.parse(o.data)}catch{}},P=e=>t.post("saveReadConfig",e),W=e=>t.post("saveBookProgress",e),_=e=>{e&&navigator.sendBeacon(new URL("saveBookProgress",p),JSON.stringify(e))},E=()=>t.get("getBookshelf"),M=e=>t.get("getChapterList?url="+encodeURIComponent(e)),N=(e,o)=>t.get("getBookContent?url="+encodeURIComponent(e)+"&index="+o),J=(e,o,s)=>{let r=new WebSocket(new URL("searchBook",l));r.onerror=f,r.onopen=()=>{r.send(`{"key":"${e}"}`)},r.onmessage=n=>{try{o(JSON.parse(n.data)),B?.call(r,n)}catch{s()}},r.onclose=()=>{s()}},T=e=>t.post("saveBook",e),$=e=>t.post("deleteBook",e),g=/bookSource/i.test(i.href),j=()=>g?t.get("getBookSources"):t.get("getRssSources"),D=e=>g?t.post("saveBookSource",e):t.post("saveRssSource",e),V=e=>g?t.post("saveBookSources",e):t.post("saveRssSources",e),q=e=>g?t.post("deleteBookSources",e):t.post("deleteRssSources",e),z=(e,o,s,r)=>{let n=new URL(`${g?"bookSource":"rssSource"}Debug`,l),a=new WebSocket(n);a.onerror=f,a.onopen=()=>{a.send(JSON.stringify({tag:e,key:o}))},a.onmessage=S=>{s(S.data),B?.call(a,S)},a.onclose=()=>{r()}},G=e=>e.startsWith(p)?e:new URL("cover?path="+encodeURIComponent(e),p).toString(),H=(e,o,s)=>o.startsWith(p)?o:new URL("image?path="+encodeURIComponent(o)+"&url="+encodeURIComponent(e)+"&width="+s,p).toString(),y={getReadConfig:O,saveReadConfig:P,saveBookProgress:W,saveBookProgressWithBeacon:_,getBookShelf:E,getChapterList:M,getBookContent:N,search:J,saveBook:T,deleteBook:$,getSources:j,saveSources:V,saveSource:D,deleteSource:q,debug:z,getProxyCoverUrl:G,getProxyImageUrl:H};0&&(module.exports={apis,axiosInstance,baseURL_localStorage_key});
